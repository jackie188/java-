## 项目中遇到的问题总结

### dwd层遇到的问题

两种方式查询数据的数据量不一样：

~~~ java
select * from ods_log;

select count(*) from ods_log;
~~~

**原因是**`select * from ods_log`不执行MR操作，默认采用的是ods_log建表语句中指定的`DeprecatedLzoTextInputFormat`，能够识别lzo.index为索引文件。

`select count(*) from ods_log`执行MR操作，默认采用的是`CombineHiveInputFormat`，不能识别`lzo.index`为索引文件，将索引文件当做普通文件处理。更严重的是，这会导致LZO文件无法切片。

~~~ java
set hive.input.format;
hive.input.format=org.apache.hadoop.hive.ql.io.CombineHiveInputFormat
~~~

**解决办法**

~~~ java
解决办法：修改CombineHiveInputFormat为HiveInputFormat
~~~

